# echo-config.yaml
# Non-sensitive configuration shared across all Echo services
# Sensitive values (passwords, secrets) should be in Kubernetes Secrets
apiVersion: v1
kind: ConfigMap
metadata:
  name: echo-config
  namespace: echo
data:
  # =============================================================================
  # Environment Configuration
  # =============================================================================
  NODE_ENV: "production"
  LOG_LEVEL: "info"

  # =============================================================================
  # Service Discovery (internal Kubernetes DNS)
  # Services communicate via ClusterIP service names
  # =============================================================================
  USER_SERVICE_URL: "http://user-service:8001"
  WORKSPACE_CHANNEL_SERVICE_URL: "http://workspace-channel-service:8002"
  MESSAGE_SERVICE_URL: "http://message-service:8003"
  BFF_SERVICE_URL: "http://bff-service:8004"
  NOTIFICATION_SERVICE_URL: "http://notification-service:8005"

  # =============================================================================
  # Frontend Configuration
  # Override in local/production overlays as needed
  # =============================================================================
  FRONTEND_BASE_URL: "http://localhost:3000"

  # =============================================================================
  # Rate Limiting
  # =============================================================================
  RATE_LIMIT_WINDOW_MS: "900000"
  RATE_LIMIT_MAX_REQUESTS: "1000"

  # =============================================================================
  # Message Service Configuration
  # =============================================================================
  MAX_MESSAGE_LENGTH: "5000"
  MAX_THREAD_DEPTH: "5"

  # =============================================================================
  # JWT Configuration (expiry times only - secret is in Secrets)
  # =============================================================================
  JWT_ACCESS_TOKEN_EXPIRY_SECONDS: "900"
  JWT_REFRESH_TOKEN_EXPIRY_SECONDS: "604800"

  # =============================================================================
  # Security
  # =============================================================================
  BCRYPT_SALT_ROUNDS: "12"

  # =============================================================================
  # Email Configuration
  # =============================================================================
  EMAIL_FROM_ADDRESS: "noreply@echo.local"
  EMAIL_FROM_NAME: "Echo Workspace"

  # =============================================================================
  # OpenTelemetry Configuration (for observability - Phase 6)
  # =============================================================================
  OTEL_EXPORTER_OTLP_ENDPOINT: "http://otel-collector:4317"
